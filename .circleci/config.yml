# This config was automatically generated from your source code
# Stacks detected: deps:java:android,deps:node:.,test:jest:,tool:gradle:
version: 2.1
orbs:
    node: circleci/node@5
jobs:
    alpha_stage:
        # Install node dependencies and run tests
        steps:
            - checkout
            - run:
                  name: configure build
                  command: bundle update fastlane && gem install bundler && bundle install
            - run:
                  name: 'Install Firebase CLI'
                  command: |
                      curl -sL firebase.tools | bash
            - run:
                  name: 'Deploy alpha build to Firebase'
                  command: |
                      bundle exec fastlane stage flavor:alpha branch:${CIRCLE_BRANCH} app_id:$FIREBASE_APP_ID_ALPHA firebase_token:$FIREBASE_TOKEN

workflows:
    build-and-test:
        jobs:
            - alpha_stage
        # - deploy:
        #     requires:
        #       - test-node
        #       - test-java
